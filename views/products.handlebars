<h4>Página: {{products.page}} de {{products.totalPages}}</h4>

<div style="display: flex">
  <a
    href="/products?page={{products.page}}&limit=10&sort={{products.sort}}&category={{products.category}}&stock={{products.stock}}"
  >10 por página</a>
  <a
    href="/products?page={{products.page}}&limit=20&sort={{products.sort}}&category={{products.category}}&stock={{products.stock}}"
  >20 por página</a>
  <a
    href="/products?page={{products.page}}&limit=50&sort={{products.sort}}&category={{products.category}}&stock={{products.stock}}"
  >50 por página</a>
</div>
<form action="/products" method="GET">
  <select name="category" onchange="this.form.submit()">
    <option value="">Todas las categorías</option>
    {{#each categoriesWithSelection}}
      <option value="{{category}}" {{#if isSelected}}selected{{/if}}>{{category}}</option>
    {{/each}}
  </select>
</form>

<form action="/products" method="GET">
  <select name="stock" onchange="this.form.submit()">
    <option value="">Todos los niveles de stock</option>
    <option value="1">1 unidad</option>
    <option value="2">2 unidades</option>
    <option value="3">3 unidades</option>
    <option value="4">4 unidades</option>
    <option value="5">5 unidades</option>
    <option value="+6">+6 unidades</option>
  </select>
</form>

<div class="d-flex flex-row justify-content-end align-items-center gap-3">
  <p class="m-0">Ordenar por:</p>
  <select class="form-select w-auto" onchange="location = this.value;">
    <option value="../products">Precio</option>
  <option value="../products?sort=asc">Menor precio</option>
  <option value="../products?sort=desc">Mayor precio</option>
</select>
</div>

<!-- Agregar formulario para filtrar por stock -->
<form action="./products.handlebars" method="get">
  <input type="hidden" name="page" value="{{products.page}}" />
  <input type="hidden" name="limit" value="{{products.limit}}" />
  <input type="hidden" name="sort" value="{{products.sort}}" />
  <input type="hidden" name="category" value="{{products.category}}" />
  <input
    type="number"
    name="stock"
    placeholder="Filtrar por stock"
    value="{{products.stock}}"
  />
  <button type="submit">Filtrar</button>
</form>

<div class="product-container">
  {{#each products.docs}}
    <div class="card">
      <img src="..." class="card-img-top" alt="..." />
      <div class="card-body">
        <h5 class="card-title">{{this.title}}</h5>
        <p class="card-text">{{this.description}}</p>
        <p class="card-text">${{this.price}}</p>
        <a href="#" class="btn btn-primary">Agregar al carrito</a>
      </div>
    </div>
  {{/each}}
</div>

<nav aria-label="Page navigation example ">
    <ul class="pagination d-flex justify-content-center">
      {{#if products.hasPrevPage}}
        <li class="page-item">
          <a class="page-link" href="./products.handlebars">Anterior</a>
        </li>
      {{/if}}

      {{#each pages}}
        <li class="page-item">
          <a class="page-link" href="./products.handlebars">{{this}}</a>
        </li>
      {{/each}}

      {{#if products.hasNextPage}}
        <li class="page-item">
          <a class="page-link" href="./products.handlebars">Siguiente</a>
        </li>
      {{/if}}
    </ul>
  </nav>
    <script src='../../public/js/socket.io.js'></script>
    <script src='../../public/js/products.js'></script>
  </body>
</html>